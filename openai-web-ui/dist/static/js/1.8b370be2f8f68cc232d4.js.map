{"version":3,"sources":["webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js","webpack:///src/views/Chat.vue","webpack:///./src/views/Chat.vue?c361","webpack:///./src/views/Chat.vue"],"names":["module","exports","default","__webpack_require__","__esModule","core","$JSON","JSON","stringify","it","apply","arguments","Chat","name","data","ruleForm","msg","token","nikName","balanceCount","userType","rules","required","message","trigger","loading","answer","chatRecords","showDefault","queryCount","userQuerys","submit","methods","codeHighlight","code","console","log","hljs","highlightAuto","value","submitQuestion","_this2","this","trim","$notify","error","title","myScroll","_this","userInput","document","getElementById","chat","user","system","push","reco","role","myToken","localStorage","getItem","request","post","stringify_default","then","response","$router","eventSource","EventSource","onopen","date","year","month","day","hour","minute","second","now","Date","length","time","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","onmessage","e","msgs","close","_reco","lastChat","parse","choices","delta","content","onerror","resetForm","formName","$refs","resetFields","goAdminViews","flushUserInfo","_this3","get","resp","exit","removeItem","cardId","$nextTick","scrollIntoView","created","views_Chat","render","_vm","_h","$createElement","_c","_self","attrs","gutter","xs","sm","md","lg","xl","staticClass","_v","staticStyle","text-align","height","font-weight","font-size","_e","_l","index","key","id","_s","placeholder","nativeOn","keyup","$event","type","indexOf","_k","keyCode","model","callback","$$v","$set","expression","slot","icon","on","click","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"4DAAAA,EAAAC,SAAkBC,QAAYC,EAAQ,QAAmCC,YAAA,yBCAzE,IAAAC,EAAWF,EAAQ,QACnBG,EAAAD,EAAAE,OAAAF,EAAAE,MAAuCC,UAAAD,KAAAC,YACvCR,EAAAC,QAAA,SAAAQ,GACA,OAAAH,EAAAE,UAAAE,MAAAJ,EAAAK,uICuFAC,GACAC,KAAA,OACAC,KAFA,WAGA,OAEAC,UACAC,IAAA,GACAC,MAAA,IAEAC,QAAA,GACAC,aAAA,EACAC,SAAA,GACAC,OACAL,MACAM,UAAA,EAAAC,QAAA,mBAAAC,QAAA,UAIAC,SAAA,EACAC,OAAA,GACAC,eAMAC,aAAA,EACAC,WAAA,EACAC,cAGAC,QAAA,IAGAC,SAEAC,cAFA,SAEAC,GAEA,OADAC,QAAAC,IAAA,KAAAF,GACAG,KAAAC,cAAAJ,GAAAK,OAEAC,eANA,WAMA,IAAAC,EAAAC,KAEA,QAAAA,KAAA3B,SAAAC,IAAA2B,OAOA,MAAAD,KAAAX,OAAA,CAUA,GAFAW,KAAAX,QAAA,EACAW,KAAA3B,SAAAC,IAAA,GACA,GAAA0B,KAAAvB,cAAAuB,KAAAvB,aAAA,EAOA,OALAuB,KAAAE,QAAAC,OACAC,MAAA,KACAvB,QAAA,wBAEAmB,KAAAX,QAAA,GAIAW,KAAAd,aAAA,EAEAc,KAAAK,WAEA,IAAAC,EAAAN,KAEAO,EAAAC,SAAAC,eAAA,aAAAZ,MAEAa,GAAAC,KAAAJ,EAAAK,OAAA,IACAN,EAAAlB,WAAAyB,KAAAH,GAEA,IAAAI,GAAAC,KAAA,OAAAzC,IAAAiC,GAEAD,EAAArB,YAAA4B,KAAAC,GAEA,IAAAE,EAAAC,aAAAC,QAAA,SACMC,EAAA,EAANC,KAAA,aAAAC,IAAAf,EAAArB,cACAV,MAAAyC,IACAM,KAAA,SAAAC,GAEA,KAAAA,EAAA/B,OACAO,EAAAG,QAAAC,OACAC,MAAA,KACAvB,QAAA,gBAEAkB,EAAAyB,QAAAX,KAAA,WAEA,IAAAY,EAAA,IAAAC,YAAA,wCAAAH,EAAAnD,MAEAqD,EAAAE,OAAA,WACArB,EAAAjB,QAAA,EAEA,IAOAuC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAbAC,EAAA,IAAAC,KACA9B,EAAAlB,WAAAkB,EAAAlB,WAAAiD,OAAA,GAAAC,MAOAT,GADAD,EANAO,GAOAI,cACAT,EAAAF,EAAAY,WAAA,EACAT,EAAAH,EAAAa,UACAT,EAAAJ,EAAAc,WACAT,EAAAL,EAAAe,aACAT,EAAAN,EAAAgB,aAEAf,EAAA,IAAAC,EAAA,IAAAC,EAAA,IAAAC,EAAA,IAAAC,EAAA,IAAAC,GAbA5B,EAAAtB,OAAA,GAEAsB,EAAAjC,SAAAC,IAAA,IAcAmD,EAAAoB,UAAA,SAAAC,GAEA,IAAAC,EAAAD,EAAA1E,KACA,cAAA2E,EAAA,CAEAzC,EAAAjB,QAAA,EAEAoC,EAAAuB,QAEA1C,EAAAD,WAEAC,EAAA7B,eAEA,IAAAwE,GAAAlC,KAAA,SAAAzC,IAAAgC,EAAAtB,QACAsB,EAAArB,YAAA4B,KAAAoC,GACA3C,EAAAtB,OAAA,QACA,eAAA+D,EAAA,CACAtB,EAAAuB,QACA,IAAAE,EAAA5C,EAAAlB,WAAAkB,EAAAlB,WAAAiD,OAAA,GACA/B,EAAAjB,QAAA,EACA6D,EAAAtC,OAAA,kBAIA,GAAA/C,KAAAsF,MAAAJ,GAAAK,QAAA,GAAAC,MAAAC,QAAA,CAEA,IAAAhF,EAAAT,KAAAsF,MAAAJ,GAAAK,QAAA,GAAAC,MAAAC,QACAhD,EAAAtB,QAAAV,EAIAgC,EAAAlB,WAAAkB,EAAAlB,WAAAiD,OAAA,GAEAzB,QAAAtC,IAMAmD,EAAA8B,QAAA,SAAAT,GACArB,EAAAuB,QACA,IAAAE,EAAA5C,EAAAlB,WAAAkB,EAAAlB,WAAAiD,OAAA,GACA/B,EAAAjB,QAAA,EACA6D,EAAAtC,OAAA,qBAhHAZ,KAAAE,QAAAC,OACAC,MAAA,KACAvB,QAAA,oBATAmB,KAAAE,QAAAC,OACAC,MAAA,KACAvB,QAAA,cAyHA2E,UApIA,SAoIAC,GACAzD,KAAA0D,MAAAD,GAAAE,eAGAC,aAxIA,WAyIA5D,KAAAwB,QAAAX,KAAA,WAGAgD,cA5IA,WA4IA,IAAAC,EAAA9D,KACMmB,EAAA,EAAN4C,IAAA,SAAAzC,KAAA,SAAA0C,GAGAF,EAAAtF,QAAAwF,EAAAxF,QACAsF,EAAArF,aAAAuF,EAAAvF,aACAqF,EAAApF,SAAAsF,EAAAtF,SACA,KAAAsF,EAAAxE,OACAsE,EAAA5D,QAAAC,OACAC,MAAA,KACAvB,QAAA,gBAEAiF,EAAAtC,QAAAX,KAAA,cAKAoD,KA7JA,WA8JAhD,aAAAiD,WAAA,SACAlE,KAAAwB,QAAAX,KAAA,WAEAR,SAjKA,WAkKA,IAAA8D,EAAA,QAAAnE,KAAAZ,WAAAiD,OAAA,GAEArC,KAAAoE,UAAA,WACA5D,SAAAC,eAAA0D,GACAE,qBAIAC,QA5MA,WA8MAtE,KAAAzB,MAAA0C,aAAAC,QAAA,SAGAlB,KAAA6D,gBAGA7D,KAAAf,eACAe,KAAAZ,gBC5SemF,GADEC,OAFjB,WAA0B,IAAAC,EAAAzE,KAAa0E,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,OAAOC,OAAA,MAAaH,EAAA,UAAeE,OAAOE,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,KAAoCR,EAAA,OAAYS,YAAA,mBAA2BZ,EAAAa,GAAA,KAAAV,EAAA,UAA6BE,OAAOE,GAAA,GAAAC,GAAA,GAAAC,GAAA,GAAAC,GAAA,GAAAC,GAAA,MAAyCR,EAAA,OAAYS,YAAA,iBAA2BrF,KAAA,YAAA4E,EAAA,OAA+BW,aAAaC,aAAA,SAAAC,OAAA,UAAuCb,EAAA,KAAUW,aAAaG,cAAA,OAAAC,YAAA,UAAyClB,EAAAa,GAAA,qBAAAb,EAAAa,GAAA,KAAAV,EAAA,KAAkDW,aAAaG,cAAA,OAAAC,YAAA,UAAyClB,EAAAa,GAAA,kBAAAb,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,uCAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,uBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,sBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,sBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,sBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,sBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,sBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAA,EAAA,UAAAH,EAAAa,GAAA,uBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,oCAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,mCAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,wBAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,QAAAH,EAAAa,GAAA,8BAAAV,EAAA,QAAAH,EAAAmB,KAAAnB,EAAAa,GAAA,KAAAtF,KAAAd,YAAy0CuF,EAAAmB,KAAz0ChB,EAAA,OAAi3BS,YAAA,cAAyBZ,EAAAoB,GAAA7F,KAAA,oBAAAU,EAAAoF,GAA+C,OAAAlB,EAAA,OAAiBmB,IAAAD,EAAAT,YAAA,YAAAP,OAAyCkB,GAAA,OAAAF,KAAqBlB,EAAA,OAAYS,YAAA,OAAiBZ,EAAAa,GAAA,QAAAb,EAAAwB,GAAAvF,EAAA4B,SAAAmC,EAAAa,GAAA,KAAAV,EAAA,OAA4DS,YAAA,SAAmBT,EAAA,OAAAA,EAAA,UAAAH,EAAAa,GAAA,SAAAb,EAAAa,GAAAb,EAAAwB,GAAAvF,EAAAC,WAAA8D,EAAAa,GAAA,KAAAV,EAAA,OAA6FS,YAAA,KAAAP,OAAwBkB,GAAA,OAAAF,KAAqBlB,EAAA,OAAAA,EAAA,UAAAH,EAAAa,GAAA,SAAAb,EAAAa,GAAAb,EAAAwB,GAAAvF,EAAAE,iBAA2E,KAAA6D,EAAAa,GAAA,KAAAV,EAAA,OAAsCS,YAAA,UAAoBT,EAAA,WAAgBS,YAAA,YAAAP,OAA+BnG,MAAA8F,EAAA9F,SAAmBiG,EAAA,YAAiBS,YAAA,oBAAAP,OAAuCoB,YAAA,QAAAF,GAAA,aAAuCG,UAAWC,MAAA,SAAAC,GAAyB,OAAAA,EAAAC,KAAAC,QAAA,QAAA9B,EAAA+B,GAAAH,EAAAI,QAAA,WAAAJ,EAAAN,IAAA,SAAsF,KAAetB,EAAA3E,eAAA9B,MAAA,KAAAC,aAAkDyI,OAAQ7G,MAAA4E,EAAApG,SAAA,IAAAsI,SAAA,SAAAC,GAAkDnC,EAAAoC,KAAApC,EAAApG,SAAA,MAAAuI,IAAmCE,WAAA,kBAA4BlC,EAAA,aAAkBS,YAAA,SAAAP,OAA4BiC,KAAA,SAAAC,KAAA,iBAAAjI,QAAAiB,KAAAX,QAA8D4H,IAAKC,MAAAzC,EAAA3E,gBAA2BiH,KAAA,YAAe,aAAAtC,EAAAa,GAAA,KAAAV,EAAA,UAAyCE,OAAOE,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,KAAoCR,EAAA,OAAYS,YAAA,oBAA2B,IAE9qF8B,oBCCjB,IAcAC,EAdyB3J,EAAQ,OAcjC4J,CACEnJ,EACAqG,GATF,EAVA,SAAA+C,GACE7J,EAAQ,SAaV,kBAEA,MAUe8J,EAAA,QAAAH,EAAiB","file":"static/js/1.8b370be2f8f68cc232d4.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 0 1","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 0 1","<template>\r\n  <el-row :gutter=\"24\">\r\n\r\n    <!-- 左边 缩进 -->\r\n    <el-col :xs=\"0\" :sm=\"2\" :md=\"5\" :lg=\"5\" :xl=\"5\">\r\n      <div class=\"grid-content \"></div>\r\n    </el-col>\r\n    <!-- 内容主体 行 -->\r\n    <el-col :xs=\"24\" :sm=\"20\" :md=\"14\" :lg=\"14\" :xl=\"14\">\r\n      <!-- 内容主体的div -->\r\n      <div class=\"grid-content\">\r\n        <!-- 默认显示内容的div -->\r\n        <div style=\"text-align: center; height: 80vh\" v-if=\"this.showDefault\">\r\n          <p style=\"font-weight: bold;  font-size: 35px;\">Open AI ChatGPT</p>\r\n          <p style=\"font-weight: bold;  font-size: 20px;\">软件持续开发更新中...</p>\r\n          <span>基于 OpenAI 的 ChatGPT 自然语言模型人工智能对话。</span><br>\r\n          <span>ChatGPT 可以为您做些什么：</span><br>\r\n          <span>⑴. 帮写代码、文案、论文、小说</span><br>\r\n          <span>⑵. 帮文案润色、写诗作词、谱曲</span><br>\r\n          <span>⑶. 帮扮演面试官、书籍电影角色</span><br>\r\n          <span>⑷. 陪聊倾诉、解忧解惑、讲故事</span><br>  \r\n          <span>⑸. 帮您翻译、绘图、设计、构思</span><br>\r\n          <span><strong>注意：以上内容均为原创内容！！</strong></span><br>\r\n          <span>【例1：写一篇800字关于春天的作文，要有花有草，有动物。】</span><br>\r\n          <span>【例2：写一首关于爱情的歌，主题是午夜思念曾经深爱的她。】</span><br>\r\n          <span>【例3：翻译xxxxx为英文.中文】</span><br>\r\n          <span>【例4：用C#语言写一个SMTP邮件群发软件。】</span><br>\r\n        </div>\r\n\r\n        <!-- 聊天的Card 逐个添加 -->\r\n        <div v-if=\"!this.showDefault\" class=\"scroll_box\">\r\n          <!-- <el-card class=\"box-card\"\r\n            v-for=\"(chat,index) in this.userQuerys\"\r\n            :key=\"index\"\r\n            >\r\n              <div slot=\"header\" class=\"clearfix\">\r\n                <span style=\"font-weight: blod;\">Me:{{chat.user}}</span>\r\n              </div>\r\n              <div>\r\n               Ai: {{ chat.system }}\r\n              </div>\r\n            </el-card> -->\r\n\r\n\r\n          <div v-for=\"(chat, index) in this.userQuerys\" :key=\"index\" class=\"list_item\" :id=\"'div-' + index\">\r\n            <div class=\"ti\">回复时间：{{ chat.time }}</div>\r\n            <div class=\"mine\">\r\n              <!-- <img src=\"\" alt=\"\"> -->\r\n              <div><strong>M: </strong>{{ chat.user }}</div>\r\n            </div>\r\n            <!-- <div>{{ chat.system }}</div> -->\r\n            <!-- <div v-html=\"chat.system\"> Ai: </div> -->\r\n            <div class=\"ai\" :id=\"'div-' + index\">\r\n              <!-- <img src=\"\" alt=\"\"> -->\r\n              <!-- <vue-markdown :source=\"chat.system\" :options=\"{highlight: codeHighlight}\" ></vue-markdown> -->\r\n              <div><strong>A: </strong>{{ chat.system }}</div>\r\n              <!-- <mavon-editor v-model=\"chat.system\"\r\n                style=\"width: 100%; height=100%; min-height: 20px; overflow: hidden; overflow-y: hidden;\"\r\n                :scrollStyle=true placeholder=\"Ai正在输入...\" previewBackground=\"#ffffff\" :boxShadow=false :subfield=false\r\n                transition=true editable=false preview=true :toolbarsFlag=false defaultOpen=\"preview\"></mavon-editor> -->\r\n              <!-- <div v-highlight>\r\n                {{ chat.system }}\r\n              </div> -->\r\n                \r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 下部分  输入框 -->\r\n      <div class=\"input\">\r\n        <el-form :rules=\"rules\" class=\"queryForm\">\r\n          <el-input placeholder=\"请输入内容\" id=\"userInput\" v-model=\"ruleForm.msg\" class=\"input-with-select\" @keyup.enter.native=\"submitQuestion\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"submitQuestion\" class=\"append\"\r\n              :loading=\"this.submit\" ></el-button>\r\n          </el-input>\r\n        </el-form>\r\n      </div>\r\n    </el-col>\r\n    <!-- 右边 缩进 -->\r\n    <el-col :xs=\"0\" :sm=\"2\" :md=\"5\" :lg=\"5\" :xl=\"5\">\r\n      <div class=\"grid-content \"></div>\r\n    </el-col>\r\n\r\n  </el-row>\r\n</template>\r\n  \r\n<script>\r\nimport request from '../utils/request';\r\n\r\nexport default {\r\n  name: \"Chat\",\r\n  data() {\r\n    return {\r\n      // imgUrl: require('@/assets/favicon.ico'),\r\n      ruleForm: {\r\n        msg: \"\",//用户的输入\r\n        token: ''//用户的token令牌\r\n      },\r\n      nikName: \"\",//用户昵称\r\n      balanceCount: 0,//剩余提问次数\r\n      userType: '',//用户类型 0普通用户 1管理员\r\n      rules: {\r\n        msg: [\r\n          { required: true, message: '请输入你的问题或者你要发送的信息', trigger: 'blur' }\r\n        ]\r\n      },\r\n\r\n      loading: false,//是否开启加载模式\r\n      answer: '',//ai的回答用于上下文关联的\r\n      chatRecords: [\r\n        // {\r\n        //   //'role': '',//角色\r\n        //   //'msg': ''//内容\r\n        // }\r\n      ], //用户与AI的聊天记录\r\n      showDefault: true,//是否展示默认介绍页面\r\n      queryCount: 0,//提问总次数\r\n      userQuerys: [\r\n\r\n      ],\r\n      submit: false//提问的按钮\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    codeHighlight(code) {\r\n      console.log(\"代码\" + code)\r\n      return hljs.highlightAuto(code).value;\r\n    },\r\n    submitQuestion() {\r\n\r\n      if (this.ruleForm.msg.trim() === '') {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: \"请输入您的问题！\"\r\n        });\r\n        return;\r\n      }\r\n      if (this.submit == true) {\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: \"请等待Ai回答完成！\"\r\n        });\r\n        return;\r\n      }\r\n      //开启回答模式\r\n      this.submit = true\r\n      this.ruleForm.msg = ''\r\n      if (this.balanceCount == 0 || this.balanceCount < 0) {\r\n        //无查询次数\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: \"无查询次数，联系管理员充值！\"\r\n        });\r\n        this.submit = false\r\n        return;\r\n      }\r\n      //关闭默认展示页面\r\n      this.showDefault = false\r\n      //滑动页面\r\n      this.myScroll()\r\n      //提升作用域\r\n      let _this = this\r\n      //获取用户输入\r\n      let userInput = document.getElementById(\"userInput\").value;\r\n      //把用户的问题添加到问题集合里面\r\n      let chat = { \"user\": userInput, \"system\": \"\" }\r\n      _this.userQuerys.push(chat)\r\n      //创建用户输入的对象\r\n      let reco = { 'role': 'user', 'msg': userInput }\r\n      //添加到聊天记录对象数组里面\r\n      _this.chatRecords.push(reco)\r\n      //获取token\r\n      let myToken = localStorage.getItem(\"token\")\r\n      request.post('/chat/pose', JSON.stringify(_this.chatRecords), {\r\n        'token': myToken\r\n      }).then(response => {\r\n        //会话过期\r\n        if (response.code == 503) {\r\n          this.$notify.error({\r\n            title: '错误',\r\n            message: \"会话过期,请重新登录!\"\r\n          });\r\n          this.$router.push(\"/login\")\r\n        }\r\n        let eventSource = new EventSource('http://chat.niitcxl.cn:8989/chat/see/' + response.data);\r\n\r\n        eventSource.onopen = function () {\r\n          _this.submit = true\r\n          //获取最后一个元素 \r\n          const now = new Date();\r\n          _this.userQuerys[_this.userQuerys.length - 1].time = formatDate(now)\r\n          _this.answer = ''//清空上一次的回答\r\n          //清空输入框的内容\r\n          _this.ruleForm.msg = ''\r\n          // 获取当前时间\r\n          // 定义格式化函数\r\n          function formatDate(date) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            // 返回格式化后的时间字符串\r\n            return `${year}-${month}-${day} ${hour}:${minute}:${second}`;\r\n          }\r\n        }\r\n        eventSource.onmessage = function (e) {\r\n          //获取数据\r\n          let msgs = e.data\r\n          if (msgs === \"[DONE]\") {//等于  [DONE] 说明回答问完成\r\n            //按钮可以点击\r\n            _this.submit = false\r\n            //关闭连接\r\n            eventSource.close();\r\n            //滑动页面\r\n            _this.myScroll()\r\n            //对可提问次数进行减少\r\n            _this.balanceCount--\r\n            //打印数据\r\n            let reco = { 'role': 'system', 'msg': _this.answer }\r\n            _this.chatRecords.push(reco)\r\n            _this.answer = ''\r\n          } else if (msgs === \"[ERROR]\") {\r\n            eventSource.close()\r\n            let lastChat = _this.userQuerys[_this.userQuerys.length - 1]\r\n            _this.submit = false\r\n            lastChat.system = '出错了，请刷新页面！'\r\n          }\r\n          else {//说明数据开始\r\n\r\n            if (JSON.parse(msgs).choices[0].delta.content) {\r\n              //获取内容\r\n              let msg = JSON.parse(msgs).choices[0].delta.content\r\n              _this.answer += msg; // 做到上下问关联\r\n              //滑动页面\r\n              // _this.myScroll()\r\n              //获取最后一个元素 \r\n              let lastChat = _this.userQuerys[_this.userQuerys.length - 1]\r\n              //修改ai聊天内容\r\n              lastChat.system += msg\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        eventSource.onerror = function (e) {\r\n          eventSource.close()\r\n          let lastChat = _this.userQuerys[_this.userQuerys.length - 1]\r\n          _this.submit = false\r\n          lastChat.system = '出错了，请刷新页面！'\r\n        }\r\n      })\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    //跳转管理员页面\r\n    goAdminViews() {\r\n      this.$router.push('/admin')\r\n    },\r\n    //刷新用户信息\r\n    flushUserInfo() {\r\n      request.get(\"/user\").then(resp => {\r\n        //对剩余次数进行重新赋值 以保证数据是最新的\r\n\r\n        this.nikName = resp.nikName\r\n        this.balanceCount = resp.balanceCount\r\n        this.userType = resp.userType\r\n        if (resp.code == 503) {\r\n          this.$notify.error({\r\n            title: '错误',\r\n            message: \"会话过期,请重新登录!\"\r\n          });\r\n          this.$router.push(\"/login\")\r\n        }\r\n      })\r\n    },\r\n    //退出账户的方法\r\n    exit() {\r\n      localStorage.removeItem(\"token\")\r\n      this.$router.push(\"/login\")\r\n    },\r\n    myScroll() {\r\n      let cardId = 'div-' + (this.userQuerys.length - 1)\r\n      // console.log(cardId)\r\n      this.$nextTick(() => {\r\n        var element = document.getElementById(cardId);\r\n        element.scrollIntoView();\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    //赋值token\r\n    this.token = localStorage.getItem(\"token\")\r\n\r\n    //发起请求进行查询用户信息\r\n    this.flushUserInfo()\r\n\r\n    //清空数据\r\n    this.chatRecords=[]\r\n    this.userQuerys=[]\r\n\r\n  }\r\n}\r\n</script>\r\n  \r\n  \r\n<style scoped>\r\n.queryForm{\r\n  border: 1px solid rgb(102,177,255);\r\n}\r\n.v-note-wrapper markdown-body{\r\n  overflow: hidden;\r\n  height: 100%;\r\n  \r\n}\r\n\r\n.el-card__body,\r\n.el-main {\r\n  overflow-y: scroll;\r\n  height: 160%;\r\n  margin-bottom: 200px;\r\n}\r\n\r\n.scroll_box {\r\n  max-width: 1100px;\r\n  width: 90%;\r\n  height: 80vh;\r\n  position: fixed;\r\n  overflow-y: auto;\r\n  z-index: 999;\r\n}\r\n\r\n.input {\r\n  max-width: 1100px;\r\n  width: 90vw;\r\n  position: fixed;\r\n  z-index: 999999;\r\n  bottom: 50px;\r\n  left: auto;\r\n}\r\n\r\n.list_item {\r\n  border: 1px solid rgb(230, 222, 222);\r\n  width: auto;\r\n  word-break: break-all;\r\n  word-wrap: break-word;\r\n  white-space: pre-wrap;\r\n  background: #f3f1f1c9;\r\n  border-radius: 10px;\r\n  padding: 0px 0 0px 0;\r\n  margin: 30px 0;\r\n  position: relative;\r\n}\r\n\r\n.ti {\r\n  position: absolute;\r\n  top: -20px;\r\n  left: 0;\r\n  z-index: 999;\r\n  font-size: 5px;\r\n}\r\n\r\n\r\n.text {\r\n  font-size: 14px;\r\n}\r\n\r\n.item {\r\n  margin-bottom: 18px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  overflow-y: scroll;\r\n  height: 200%;\r\n  margin-bottom: 200px;\r\n  scrollbar-width: none;\r\n  /* firefox */\r\n  -ms-overflow-style: none;\r\n  /* IE 10+ */\r\n}\r\n\r\n#contitle {\r\n\r\n  padding: 10px;\r\n  border-radius: 20px;\r\n  background-color: rgb(238, 238, 238);\r\n}\r\n\r\n.el-row {\r\n  margin-bottom: 20px;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n\r\n.el-col {\r\n  border-radius: 4px;\r\n}\r\n\r\n.bg-purple-dark {\r\n  background: #99a9bf;\r\n}\r\n\r\n.bg-purple {\r\n  background: #d3dce6;\r\n}\r\n\r\n.bg-purple-light {\r\n  background: #e5e9f2;\r\n}\r\n\r\n.grid-content {\r\n  border-radius: 4px;\r\n  min-height: 36px;\r\n}\r\n\r\n.row-bg {\r\n  padding: 10px 0;\r\n  background-color: #f9fafc;\r\n}\r\n\r\n.mine {\r\n  margin-left: 5%;\r\n  width: 90%;\r\n  display: flex;\r\n  /*justify-content: flex-end;*/\r\n  justify-content: flex-start;\r\n  margin-bottom: 0px;\r\n  /*border-bottom: 1px solid rgb(141, 141, 141);*/\r\n  padding-bottom: 12px;\r\n}\r\n\r\n.mine img,\r\n.ai img {}\r\n\r\n.ai {\r\n  padding: 0 5% 10px 5%;\r\n  width: 90%;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: -10px;\r\n  background: rgb(255, 253, 253);\r\n  min-height: 50px;\r\n  border-radius: 0px 0px 7px 7px;\r\n}\r\n\r\n.mine div {\r\n  padding: 5px 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: flex-start;\r\n  /*border-radius: 7px 7px 0 7px;*/\r\n  /*background: rgb(149, 236, 105);*/\r\n}\r\n\r\n.ai div {\r\n  padding: 5px 20px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n  border-radius: 0px 0px 7px 7px;\r\n\r\n  /* background: rgb(229, 229, 229);*/\r\n}\r\n\r\n.mine div strong {\r\n  position: relative;\r\n  left: -2em;\r\n}\r\n\r\n.ai div strong {\r\n  position: relative;\r\n  left: -2em;\r\n  top: 5px;\r\n}\r\n\r\n/* 隐藏垂直滚动条 */\r\n::-webkit-scrollbar {\r\n  width: 0;\r\n  background-color: transparent;\r\n}\r\n\r\n/* 隐藏水平滚动条 */\r\n::-webkit-scrollbar-horizontal {\r\n  height: 0;\r\n}\r\n\r\n/* 隐藏滚动条上的按钮 */\r\n::-webkit-scrollbar-button {\r\n  display: none;\r\n}\r\n\r\nbody {\r\n  overflow: auto;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"xs\":0,\"sm\":2,\"md\":5,\"lg\":5,\"xl\":5}},[_c('div',{staticClass:\"grid-content\"})]),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":20,\"md\":14,\"lg\":14,\"xl\":14}},[_c('div',{staticClass:\"grid-content\"},[(this.showDefault)?_c('div',{staticStyle:{\"text-align\":\"center\",\"height\":\"80vh\"}},[_c('p',{staticStyle:{\"font-weight\":\"bold\",\"font-size\":\"35px\"}},[_vm._v(\"Open AI ChatGPT\")]),_vm._v(\" \"),_c('p',{staticStyle:{\"font-weight\":\"bold\",\"font-size\":\"20px\"}},[_vm._v(\"软件持续开发更新中...\")]),_vm._v(\" \"),_c('span',[_vm._v(\"基于 OpenAI 的 ChatGPT 自然语言模型人工智能对话。\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"ChatGPT 可以为您做些什么：\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"⑴. 帮写代码、文案、论文、小说\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"⑵. 帮文案润色、写诗作词、谱曲\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"⑶. 帮扮演面试官、书籍电影角色\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"⑷. 陪聊倾诉、解忧解惑、讲故事\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"⑸. 帮您翻译、绘图、设计、构思\")]),_c('br'),_vm._v(\" \"),_c('span',[_c('strong',[_vm._v(\"注意：以上内容均为原创内容！！\")])]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"【例1：写一篇800字关于春天的作文，要有花有草，有动物。】\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"【例2：写一首关于爱情的歌，主题是午夜思念曾经深爱的她。】\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"【例3：翻译xxxxx为英文.中文】\")]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"【例4：用C#语言写一个SMTP邮件群发软件。】\")]),_c('br')]):_vm._e(),_vm._v(\" \"),(!this.showDefault)?_c('div',{staticClass:\"scroll_box\"},_vm._l((this.userQuerys),function(chat,index){return _c('div',{key:index,staticClass:\"list_item\",attrs:{\"id\":'div-' + index}},[_c('div',{staticClass:\"ti\"},[_vm._v(\"回复时间：\"+_vm._s(chat.time))]),_vm._v(\" \"),_c('div',{staticClass:\"mine\"},[_c('div',[_c('strong',[_vm._v(\"M: \")]),_vm._v(_vm._s(chat.user))])]),_vm._v(\" \"),_c('div',{staticClass:\"ai\",attrs:{\"id\":'div-' + index}},[_c('div',[_c('strong',[_vm._v(\"A: \")]),_vm._v(_vm._s(chat.system))])])])}),0):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('el-form',{staticClass:\"queryForm\",attrs:{\"rules\":_vm.rules}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\",\"id\":\"userInput\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitQuestion.apply(null, arguments)}},model:{value:(_vm.ruleForm.msg),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"msg\", $$v)},expression:\"ruleForm.msg\"}},[_c('el-button',{staticClass:\"append\",attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\",\"loading\":this.submit},on:{\"click\":_vm.submitQuestion},slot:\"append\"})],1)],1)],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":0,\"sm\":2,\"md\":5,\"lg\":5,\"xl\":5}},[_c('div',{staticClass:\"grid-content\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-541eb3ae\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-541eb3ae\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-541eb3ae\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-541eb3ae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Chat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}