webpackJsonp([6],{"D/iB":function(e,t){},LbE0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("vLgD"),o={name:"help",data:function(){var e=this;return{restForm:{username:"",email:"",code:"",password:"",confirmPassword:""},codeTime:60,codeText:"点击获取验证码",codeLoding:!1,restLoding:!1,restRules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:"请输入验证码",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,r,s){r===e.restForm.password?s():s(new Error("两次输入的密码不一致"))},trigger:"blur"}]}}},methods:{goAccount:function(){this.$router.push("/account")},handleSubmit:function(){var e=this;this.$refs.restForm.validate(function(t){if(!t)return!1;e.restLoding=!0,s.a.post("/system/forget/password",{account:e.restForm.username,email:e.restForm.email,code:e.restForm.code,password:e.restForm.confirmPassword}).then(function(t){0==t.code?(localStorage.removeItem("token"),e.$notify({title:"成功",message:"恭喜您，密码修改成功！",type:"success"}),e.restLoding=!1,e.$router.push("/login")):(e.$notify.error({title:"错误",message:t.msg}),e.restLoding=!1)})})},toLogin:function(){this.$router.push("/login")},getCode:function(){var e=this;if(this.restForm.email){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.restForm.email)?(this.codeLoding=!0,s.a.post("/email/forget/password/code",{email:this.restForm.email,account:this.restForm.username}).then(function(t){if(console.log(t),0==t.code){e.$message({message:t.msg,type:"success"});var r=setInterval(function(){e.codeTime--,e.codeTime<=0?(clearInterval(r),e.codeLoding=!1,e.codeText="点击获取验证码",e.codeTime=60):e.codeText=e.codeTime+"秒后重试！"},1e3)}else e.$message({message:t.msg,type:"error"}),clearInterval(r),e.codeLoding=!1,e.codeText="点击获取验证码",e.codeTime=60})):this.$message({message:"请先填写正确的邮箱！",type:"error"})}else this.$message({message:"请先填写邮箱！",type:"error"})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"help-wrapper"},[r("el-card",{staticClass:"help-card"},[r("div",{staticClass:"help-logo"},[r("h1",[e._v("重置密码")]),e._v(" "),r("el-link",{attrs:{type:"info"}},[e._v("为了保护你的帐号安全，我们需要验证你的身份，验证通过后即可找回你的密码。\n      ")])],1),e._v(" "),r("div",{staticClass:"rest-form"},[r("el-form",{ref:"restForm",attrs:{model:e.restForm,rules:e.restRules,"label-position":"left","label-width":"80px"}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.restForm.username,callback:function(t){e.$set(e.restForm,"username",t)},expression:"restForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"绑定邮箱",prop:"email"}},[r("el-input",{attrs:{type:"email",placeholder:"请输入该账号绑定的邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}},model:{value:e.restForm.email,callback:function(t){e.$set(e.restForm,"email",t)},expression:"restForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"code"}},[r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"验证码"},model:{value:e.restForm.code,callback:function(t){e.$set(e.restForm,"code",t)},expression:"restForm.code"}}),e._v(" "),r("el-button",{attrs:{loading:this.codeLoding,type:"text"},on:{click:e.getCode}},[e._v(e._s(this.codeText))])],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}},model:{value:e.restForm.password,callback:function(t){e.$set(e.restForm,"password",t)},expression:"restForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}},model:{value:e.restForm.confirmPassword,callback:function(t){e.$set(e.restForm,"confirmPassword",t)},expression:"restForm.confirmPassword"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:this.restLoding},on:{click:e.handleSubmit}},[e._v("重置密码")])],1)],1),e._v(" "),r("el-link",{attrs:{type:"danger"},on:{click:e.goAccount}},[e._v("忘记账号？")]),e._v(" "),r("el-link",{staticStyle:{"margin-left":"130px"},attrs:{type:"primary"},on:{click:e.toLogin}},[e._v("点击返回登陆页面")])],1)])],1)},staticRenderFns:[]};var i=r("VU/8")(o,a,!1,function(e){r("D/iB")},"data-v-7baa4e95",null);t.default=i.exports}});
//# sourceMappingURL=6.19072e098f98213905ac.js.map